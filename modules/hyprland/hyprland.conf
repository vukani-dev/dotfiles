# Hyprland Configuration
# Ported from dwm - Doom One theme

# ========================================
# MONITORS
# ========================================
# Laptop screen (primary)
monitor = eDP-1, 2496x1664@60, 0x0, 1

# Fallback for any external monitor
monitor = , preferred, auto, 1

# Default workspace
workspace = 1, default:true

# ========================================
# STARTUP
# ========================================
exec-once = waybar
exec-once = hyprpaper
exec-once = hypridle
exec-once = nm-applet --indicator
exec-once = swaync

# ========================================
# ENVIRONMENT
# ========================================
env = XCURSOR_SIZE,24
env = XCURSOR_THEME,Adwaita
env = QT_QPA_PLATFORMTHEME,qt5ct
env = NIXOS_OZONE_WL,1

# ========================================
# APPEARANCE - Doom One Theme
# ========================================
general {
    gaps_in = 5
    gaps_out = 10
    border_size = 2
    col.active_border = rgba(ff9e54ee) rgba(304D75ee) 45deg
    col.inactive_border = rgba(282c34aa)
    layout = dwindle
    allow_tearing = false
}

decoration {
    rounding = 0

    blur {
        enabled = true
        size = 6
        passes = 2
        new_optimizations = true
        xray = false
    }

    # Transparency (toggle with Mod+Shift+t)
    active_opacity = 0.95
    inactive_opacity = 0.90
    fullscreen_opacity = 1.0

    shadow {
        enabled = true
        range = 8
        render_power = 2
        color = rgba(1a1a1aee)
    }
}

animations {
    enabled = true

    bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    bezier = linear, 0.0, 0.0, 1.0, 1.0

    animation = windows, 1, 4, myBezier
    animation = windowsOut, 1, 4, default, popin 80%
    animation = border, 1, 8, default
    animation = borderangle, 1, 30, linear, loop
    animation = fade, 1, 4, default
    animation = workspaces, 1, 4, default
}

# ========================================
# LAYOUT
# ========================================
dwindle {
    pseudotile = true
    preserve_split = true
    force_split = 2  # Always split to the right/bottom
}

master {
    new_status = master
}

misc {
    force_default_wallpaper = 0
    disable_hyprland_logo = true
    disable_splash_rendering = true
}

# ========================================
# INPUT
# ========================================
input {
    kb_layout = us
    follow_mouse = 1
    sensitivity = 0

    touchpad {
        natural_scroll = true
    }
}


# ========================================
# KEYBINDINGS
# ========================================
$mod = SUPER

# Window focus (Mod + hjkl)
bind = $mod, h, movefocus, l
bind = $mod, l, movefocus, r
bind = $mod, k, movefocus, u
bind = $mod, j, movefocus, d

# Move windows (Mod + Shift + hjkl)
bind = $mod SHIFT, h, movewindow, l
bind = $mod SHIFT, l, movewindow, r
bind = $mod SHIFT, k, movewindow, u
bind = $mod SHIFT, j, movewindow, d

# Resize (Mod + Ctrl + hjkl)
bind = $mod CTRL, h, resizeactive, -50 0
bind = $mod CTRL, l, resizeactive, 50 0
bind = $mod CTRL, k, resizeactive, 0 -50
bind = $mod CTRL, j, resizeactive, 0 50

# Window management
bind = $mod SHIFT, Return, exec, ghostty
bind = $mod SHIFT, c, killactive,
bind = $mod SHIFT, q, exit,
bind = $mod SHIFT, space, togglefloating,
bind = $mod, space, togglesplit,
bind = $mod SHIFT, f, fullscreen, 0
bind = $mod, b, exec, pkill -USR1 waybar

# Layout modes (from dwm: t=tiled, f=float, m=monocle)
bind = $mod, t, pseudo,
bind = $mod, f, togglefloating,
bind = $mod, m, fullscreen, 1

# Alt-Tab window cycling
bind = ALT, Tab, cyclenext,
bind = ALT SHIFT, Tab, cyclenext, prev

# Transparency toggle
bind = $mod SHIFT, t, exec, if [ "$(hyprctl getoption decoration:active_opacity -j | jq '.float')" = "1.0" ]; then hyprctl keyword decoration:active_opacity 0.95 && hyprctl keyword decoration:inactive_opacity 0.90; else hyprctl keyword decoration:active_opacity 1.0 && hyprctl keyword decoration:inactive_opacity 1.0; fi

# Applications
bind = $mod, r, exec, rofi -show drun
bind = $mod, w, exec, zen-browser
bind = $mod, d, exec, discord
bind = $mod, e, exec, thunderbird
bind = $mod, p, exec, bitwarden
bind = $mod, n, exec, logseq

# Utilities
bind = $mod, y, exec, ghostty -e yazi
bind = $mod, s, exec, ghostty -e pulsemixer
bind = $mod, i, exec, ghostty -e nmtui
bind = $mod, q, exec, ghostty -e gotop
bind = $mod, c, exec, ghostty -e /home/vukani/scripts/toggle-syncthing.sh
bind = $mod, a, exec, ghostty -e calcurse
bind = $mod SHIFT, b, exec, ghostty -e bluetuith
bind = $mod SHIFT, x, exec, hyprlock

# Screenshot
bind = $mod SHIFT, s, exec, grim -g "$(slurp)" - | wl-copy
bind = , Print, exec, grim - | wl-copy

# Media keys
binde = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
binde = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bind = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
binde = , XF86MonBrightnessUp, exec, brightnessctl set 5%+
binde = , XF86MonBrightnessDown, exec, brightnessctl set 5%-

# Scratchpad
bind = $mod, grave, togglespecialworkspace, scratchpad
bind = $mod SHIFT, grave, movetoworkspace, special:scratchpad

# Workspaces
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5
bind = $mod, 6, workspace, 6
bind = $mod, 7, workspace, 7
bind = $mod, 8, workspace, 8
bind = $mod, 9, workspace, 9
bind = $mod, 0, workspace, 10

bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4
bind = $mod SHIFT, 5, movetoworkspace, 5
bind = $mod SHIFT, 6, movetoworkspace, 6
bind = $mod SHIFT, 7, movetoworkspace, 7
bind = $mod SHIFT, 8, movetoworkspace, 8
bind = $mod SHIFT, 9, movetoworkspace, 9
bind = $mod SHIFT, 0, movetoworkspace, 10

# Mouse bindings
bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow

# Monitor switching
bind = $mod, comma, focusmonitor, l
bind = $mod, period, focusmonitor, r
bind = $mod SHIFT, comma, movewindow, mon:l
bind = $mod SHIFT, period, movewindow, mon:r

# ========================================
# WINDOW RULES
# ========================================
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = float, title:^(Open File)$
windowrulev2 = float, title:^(Save File)$
